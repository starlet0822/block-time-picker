import{u as ve,r as V,c as me,o as he,n as pe,t as ge,a as K,b as P,d as j,F as se,e as oe,f as q,g as $e,h as ye,i as Me,w as O,E as _e,j as be,k as b,l as Se,m as T,p as de,q as ue,s as ce,v as De,x as we,y as xe,z as ke,A as He,B as Oe}from"./index-APISK7-Z.js";function Ve(S){return S&&S.__esModule&&Object.prototype.hasOwnProperty.call(S,"default")?S.default:S}var ie={exports:{}},Ce=ie.exports,fe;function Te(){return fe||(fe=1,function(S,U){(function(v,B){S.exports=B()})(Ce,function(){var v=1e3,B=6e4,F=36e5,Y="millisecond",g="second",l="minute",m="hour",x="day",W="week",C="month",E="quarter",R="year",k="date",J="Invalid Date",te=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,L=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(u){var n=["th","st","nd","rd"],e=u%100;return"["+u+(n[(e-20)%10]||n[e]||n[0])+"]"}},$=function(u,n,e){var r=String(u);return!r||r.length>=n?u:""+Array(n+1-r.length).join(e)+u},h={s:$,z:function(u){var n=-u.utcOffset(),e=Math.abs(n),r=Math.floor(e/60),a=e%60;return(n<=0?"+":"-")+$(r,2,"0")+":"+$(a,2,"0")},m:function u(n,e){if(n.date()<e.date())return-u(e,n);var r=12*(e.year()-n.year())+(e.month()-n.month()),a=n.clone().add(r,C),d=e-a<0,c=n.clone().add(r+(d?-1:1),C);return+(-(r+(e-a)/(d?a-c:c-a))||0)},a:function(u){return u<0?Math.ceil(u)||0:Math.floor(u)},p:function(u){return{M:C,y:R,w:W,d:x,D:k,h:m,m:l,s:g,ms:Y,Q:E}[u]||String(u||"").toLowerCase().replace(/s$/,"")},u:function(u){return u===void 0}},o="en",i={};i[o]=y;var f="$isDayjsObject",p=function(u){return u instanceof A||!(!u||!u[f])},D=function u(n,e,r){var a;if(!n)return o;if(typeof n=="string"){var d=n.toLowerCase();i[d]&&(a=d),e&&(i[d]=e,a=d);var c=n.split("-");if(!a&&c.length>1)return u(c[0])}else{var M=n.name;i[M]=n,a=M}return!r&&a&&(o=a),a||!r&&o},s=function(u,n){if(p(u))return u.clone();var e=typeof n=="object"?n:{};return e.date=u,e.args=arguments,new A(e)},t=h;t.l=D,t.i=p,t.w=function(u,n){return s(u,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var A=function(){function u(e){this.$L=D(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[f]=!0}var n=u.prototype;return n.parse=function(e){this.$d=function(r){var a=r.date,d=r.utc;if(a===null)return new Date(NaN);if(t.u(a))return new Date;if(a instanceof Date)return new Date(a);if(typeof a=="string"&&!/Z$/i.test(a)){var c=a.match(te);if(c){var M=c[2]-1||0,_=(c[7]||"0").substring(0,3);return d?new Date(Date.UTC(c[1],M,c[3]||1,c[4]||0,c[5]||0,c[6]||0,_)):new Date(c[1],M,c[3]||1,c[4]||0,c[5]||0,c[6]||0,_)}}return new Date(a)}(e),this.init()},n.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},n.$utils=function(){return t},n.isValid=function(){return this.$d.toString()!==J},n.isSame=function(e,r){var a=s(e);return this.startOf(r)<=a&&a<=this.endOf(r)},n.isAfter=function(e,r){return s(e)<this.startOf(r)},n.isBefore=function(e,r){return this.endOf(r)<s(e)},n.$g=function(e,r,a){return t.u(e)?this[r]:this.set(a,e)},n.unix=function(){return Math.floor(this.valueOf()/1e3)},n.valueOf=function(){return this.$d.getTime()},n.startOf=function(e,r){var a=this,d=!!t.u(r)||r,c=t.p(e),M=function(G,I){var z=t.w(a.$u?Date.UTC(a.$y,I,G):new Date(a.$y,I,G),a);return d?z:z.endOf(x)},_=function(G,I){return t.w(a.toDate()[G].apply(a.toDate("s"),(d?[0,0,0,0]:[23,59,59,999]).slice(I)),a)},w=this.$W,H=this.$M,N=this.$D,X="set"+(this.$u?"UTC":"");switch(c){case R:return d?M(1,0):M(31,11);case C:return d?M(1,H):M(0,H+1);case W:var Q=this.$locale().weekStart||0,ne=(w<Q?w+7:w)-Q;return M(d?N-ne:N+(6-ne),H);case x:case k:return _(X+"Hours",0);case m:return _(X+"Minutes",1);case l:return _(X+"Seconds",2);case g:return _(X+"Milliseconds",3);default:return this.clone()}},n.endOf=function(e){return this.startOf(e,!1)},n.$set=function(e,r){var a,d=t.p(e),c="set"+(this.$u?"UTC":""),M=(a={},a[x]=c+"Date",a[k]=c+"Date",a[C]=c+"Month",a[R]=c+"FullYear",a[m]=c+"Hours",a[l]=c+"Minutes",a[g]=c+"Seconds",a[Y]=c+"Milliseconds",a)[d],_=d===x?this.$D+(r-this.$W):r;if(d===C||d===R){var w=this.clone().set(k,1);w.$d[M](_),w.init(),this.$d=w.set(k,Math.min(this.$D,w.daysInMonth())).$d}else M&&this.$d[M](_);return this.init(),this},n.set=function(e,r){return this.clone().$set(e,r)},n.get=function(e){return this[t.p(e)]()},n.add=function(e,r){var a,d=this;e=Number(e);var c=t.p(r),M=function(H){var N=s(d);return t.w(N.date(N.date()+Math.round(H*e)),d)};if(c===C)return this.set(C,this.$M+e);if(c===R)return this.set(R,this.$y+e);if(c===x)return M(1);if(c===W)return M(7);var _=(a={},a[l]=B,a[m]=F,a[g]=v,a)[c]||1,w=this.$d.getTime()+e*_;return t.w(w,this)},n.subtract=function(e,r){return this.add(-1*e,r)},n.format=function(e){var r=this,a=this.$locale();if(!this.isValid())return a.invalidDate||J;var d=e||"YYYY-MM-DDTHH:mm:ssZ",c=t.z(this),M=this.$H,_=this.$m,w=this.$M,H=a.weekdays,N=a.months,X=a.meridiem,Q=function(I,z,ae,re){return I&&(I[z]||I(r,d))||ae[z].slice(0,re)},ne=function(I){return t.s(M%12||12,I,"0")},G=X||function(I,z,ae){var re=I<12?"AM":"PM";return ae?re.toLowerCase():re};return d.replace(L,function(I,z){return z||function(ae){switch(ae){case"YY":return String(r.$y).slice(-2);case"YYYY":return t.s(r.$y,4,"0");case"M":return w+1;case"MM":return t.s(w+1,2,"0");case"MMM":return Q(a.monthsShort,w,N,3);case"MMMM":return Q(N,w);case"D":return r.$D;case"DD":return t.s(r.$D,2,"0");case"d":return String(r.$W);case"dd":return Q(a.weekdaysMin,r.$W,H,2);case"ddd":return Q(a.weekdaysShort,r.$W,H,3);case"dddd":return H[r.$W];case"H":return String(M);case"HH":return t.s(M,2,"0");case"h":return ne(1);case"hh":return ne(2);case"a":return G(M,_,!0);case"A":return G(M,_,!1);case"m":return String(_);case"mm":return t.s(_,2,"0");case"s":return String(r.$s);case"ss":return t.s(r.$s,2,"0");case"SSS":return t.s(r.$ms,3,"0");case"Z":return c}return null}(I)||c.replace(":","")})},n.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},n.diff=function(e,r,a){var d,c=this,M=t.p(r),_=s(e),w=(_.utcOffset()-this.utcOffset())*B,H=this-_,N=function(){return t.m(c,_)};switch(M){case R:d=N()/12;break;case C:d=N();break;case E:d=N()/3;break;case W:d=(H-w)/6048e5;break;case x:d=(H-w)/864e5;break;case m:d=H/F;break;case l:d=H/B;break;case g:d=H/v;break;default:d=H}return a?d:t.a(d)},n.daysInMonth=function(){return this.endOf(C).$D},n.$locale=function(){return i[this.$L]},n.locale=function(e,r){if(!e)return this.$L;var a=this.clone(),d=D(e,r,!0);return d&&(a.$L=d),a},n.clone=function(){return t.w(this.$d,this)},n.toDate=function(){return new Date(this.valueOf())},n.toJSON=function(){return this.isValid()?this.toISOString():null},n.toISOString=function(){return this.$d.toISOString()},n.toString=function(){return this.$d.toUTCString()},u}(),Z=A.prototype;return s.prototype=Z,[["$ms",Y],["$s",g],["$m",l],["$H",m],["$W",x],["$M",C],["$y",R],["$D",k]].forEach(function(u){Z[u[1]]=function(n){return this.$g(n,u[0],u[1])}}),s.extend=function(u,n){return u.$i||(u(n,A,s),u.$i=!0),s},s.locale=D,s.isDayjs=p,s.unix=function(u){return s(1e3*u)},s.en=i[o],s.Ls=i,s.p={},s})}(ie)),ie.exports}var Be=Te();const le=Ve(Be),Ie=S=>{const U=Math.floor(S/60).toString().padStart(2,"0"),v=String(S%60).padStart(2,"0");return`${U}:${v}`},Re={class:"web-time-picker"},je={class:"time-wrapper"},Ye={class:"time-text"},Ne={class:"time-full"},Ee=["data-val","data-idx","title","onClick","onMousemove","onMouseleave"],ee={__name:"WebTimePicker",props:{modelValue:{type:Array,default:()=>[]},minHour:{type:[Number,String],default:"0"},maxHour:{type:[Number,String],default:"23"},step:{type:[Number,String],default:30,validator:S=>60%parseInt(S)===0},rangeSeparator:{type:String,default:" ~ "},activeColor:{type:String,default:"#2e6cf3"},inactiveColor:{type:String,default:"#a0a6ae"},readonly:Boolean,disabledBefore:Boolean,size:{type:String,default:"default",validatior(S){return["large","default","small"].includes(S)}}},emits:["update:modelValue","change"],setup(S,{emit:U}){ve($=>({"2f107b7d":S.inactiveColor,"35e06f02":S.activeColor}));const v=S,B=U,F=V(0),Y=V([]),g=V([]),l=V(),m=V(),x=V(),W=me(()=>{let $=[];return l.value!==void 0&&x.value!==void 0&&($=[l.value,x.value].sort((h,o)=>h-o)),$});he(()=>{k(),J(),C()});const C=async()=>{var $,h;await pe(),F.value=(h=($=document.querySelector(".time-bar"))==null?void 0:$.getBoundingClientRect())==null?void 0:h.width},E=$=>String(Math.floor($/60)).padStart(2,"0"),R=()=>{let $=[];if(g.value.length===0){$=[],B("update:modelValue",$),B("change",$);return}const h=+v.minHour*60+Number(v.step)*l.value+Number(v.step),o=+v.minHour*60+Number(v.step)*m.value+Number(v.step);let i,f,p,D,s,t;h&&o?(p=E(h-+v.step),i=E(o),D=(h-+v.step)%60===0?"00":Math.round(((h-+v.step)/60-p)*60),f=o%60===0?"00":Math.round((o/60-i)*60),s=p+":"+D,+i==24&&(i=23,f=59),t=i+":"+f):(p=E(h-+v.step),i=E(h),D=(h-+v.step)%60===0?"00":Math.round(((h-+v.step)/60-p)*60),f=h%60===0?"00":Math.round((h/60-i)*60),s=p+":"+D,+i==24&&(i=23,f=59),t=i+":"+f),$=[s,t],B("update:modelValue",$),B("change",$)},k=()=>{const $=new Date().getHours(),h=new Date().getMinutes(),o=[],i=f=>{const p=[],D=60/+v.step*(f-+v.minHour),s=(t,A)=>{if(!v.disabledBefore)return!1;if(t<$)return!0;if($===t){const Z=+v.step*(A-1),u=+v.step*A;if(h>=Z&&h<=u||h>=u)return!0}};for(let t=1;t<=60/+v.step;t++){const A=f*60+v.step*t,Z=Ie(A),u=le(le().format("YYYY-MM-DD")+" "+Z),n=le(u).subtract(v.step,"minute").format("HH:mm");p.push({title:`${n} - ${Z}`,value:A,selected:!1,disabled:s(f,t),index:D+t-1})}return p};for(let f=+v.minHour;f<=+v.maxHour;f++){const p={time:void 0,blocks:i(f)};p.time=E(f*60),o.push(p)}Y.value=o},J=()=>{const{modelValue:$,step:h}=ge(v);if(Array.isArray($.value)){if($.value.length===2){const o=t=>t.split(":")[0].padStart(2,"0"),i=t=>t.split(":")[1].padStart(2,"0");let f=0,p=0;const[D,s]=$.value;if(f=Y.value.findIndex(t=>t.time===o(D)),p=Y.value.findIndex(t=>t.time===o(s)),l.value=f*(60/h.value),m.value=p*(60/h.value),parseInt(i(D))==h.value){const t=i(D)/h.value;l.value=l.value+(t>0?t:0)}else{const t=i(D)/h.value;l.value=l.value+(t>0?t:0)}if(parseInt(i(s))===0)m.value=m.value-1;else if(parseInt(i(s))===59){const t=60/h.value;m.value=m.value-1+(t>0?t:0)}else{const t=i(s)/h.value;m.value=m.value-1+(t>0?t:0)}for(let t=l.value;t<=m.value;t++)g.value.splice(t-l.value,0,t)}}else throw new Error("modelValue must be a array, and the maxlength should be zero or two.")},te=($,h,o)=>{if(v.readonly)return!1;if(v.disabledBefore&&k(),!h.disabled){if(x.value=void 0,l.value===void 0&&m.value===void 0)l.value=g.value[0]=o;else if(l.value!==void 0&&m.value===void 0){if(o===l.value&&g.value.indexOf(o)>-1&&(g.value.splice(g.value.indexOf(o),1),l.value=m.value=void 0),o>l.value){m.value=o,g.value.splice(0);for(let i=l.value;i<=m.value;i++)g.value.splice(i-l.value,0,i)}if(o<l.value){const[i,f]=[o,l.value];l.value=i,m.value=f,g.value.splice(0);for(let p=l.value;p<=m.value;p++)g.value.splice(p-l.value,0,p)}}else if(l.value!==void 0&&m.value!==void 0){if(o===l.value){const i=g.value.indexOf(o);g.value.splice(i,1),g.value.length?l.value=g.value[0]:l.value=m.value=void 0}else if(o===m.value){const i=g.value.indexOf(o);g.value.splice(i,1),m.value=g.value[g.value.length-1],l.value===m.value&&(m.value=void 0)}else if(o<l.value)g.value.splice(0),l.value=m.value=void 0;else if(o>l.value){m.value=o,g.value.splice(0);for(let i=l.value;i<=m.value;i++)g.value.splice(i-l.value,0,i)}}R()}},L=$=>{v.readonly||g.value.length>1||l.value===void 0||(x.value=$)},y=()=>{v.readonly||g.value.length>1||l.value===void 0||(x.value=void 0)};return($,h)=>(P(),K("div",Re,[j("div",je,[(P(!0),K(se,null,oe(Y.value,(o,i)=>(P(),K("div",{key:o.time+i,class:"time-bar"},[j("span",Ye,q(o.time),1),j("div",Ne,[(P(!0),K(se,null,oe(o.blocks,f=>(P(),K("div",{key:f.value,"data-val":f.value,"data-idx":f.index,title:f.title,class:$e(["time-block",{"time-block--selected":g.value.includes(f.index)||x.value==f.index,"time-block--readonly":S.readonly,"time-block--disabled":f.disabled,"in-range":W.value.length==2&&f.index>W.value[0]&&f.index<W.value[1]}]),onClick:p=>te(o,f,f.index),onMousemove:p=>L(f.index),onMouseleave:p=>y(f.index)},null,42,Ee))),128))])]))),128))])]))}},Le={class:"flex-c"},We={class:"my-2"},Ue={__name:"web-time-picker",setup(S){const U=V(["09:00","18:00"]),v=V([]),B=V([]),F=V([]),Y=V([]),g=V(["09:00","23:59"]),l=V(["09:30","18:30"]),m=V(["09:40","16:00"]),x=V(["09:45","13:30"]),W=V(["09:50","12:30"]),C={10:"10分",15:"15分",20:"20分",30:"30分",60:"60分"},E=ye({minHour:"0",maxHour:"23",step:30,activeColor:"#FFCD5E",readonly:!0,disabledBefore:!0}),R=new Map([[10,W],[15,x],[20,m],[30,l],[60,g]]),k=L=>L.length?L.join(" ~ "):"-";function J(L){return R.get(+L).value}const te=(L,y)=>{R.get(+y).value=L};return(L,y)=>{const $=xe,h=we,o=He,i=be("RouterLink"),f=De,p=Se,D=_e;return P(),Me(D,{shadow:"never"},{header:O(()=>[b(f,{type:"flex",align:"middle",justify:"space-between"},{default:O(()=>[j("div",Le,[y[7]||(y[7]=T(" 块状时间段选择组件(web端)  ")),b(h,{trigger:"click"},{content:O(()=>y[5]||(y[5]=[j("p",null,[T(" 操作交互逻辑："),j("br"),T(" 1.当选择了某一节，点击该节之前则是选择开始时间，点击该节之后则是选择结束时间；"),j("br"),T(" 2.开始和结束时间均选择完毕，选择高亮区域之前则重置，选择高亮区域之后则是重新选择结束时间；"),j("br"),T(" 3.开始和结束时间均选择完毕，往前选择则重置，往后选择则是选择结束时间；"),j("br"),T(" 3.开始和结束时间均选择完毕，点击高亮区域中间（不含第一节或最后一节），则是重新选择结束时间；"),j("br"),T(" 4.开始和结束时间均选择完毕，点击高亮区域第一节或最后一节均是取消选择该时间。"),j("br")],-1)])),default:O(()=>[b($,{class:"cursor-pointer"},{default:O(()=>[b(ue(ke))]),_:1})]),_:1}),b(i,{to:"/mobie"},{default:O(()=>[b(o,{class:"ml-2"},{default:O(()=>y[6]||(y[6]=[T("前往移动端(mobie)版本")])),_:1})]),_:1})]),b(o,{href:"https://github.com/starlet0822/block-time-picker",target:"_blank"},{default:O(()=>[b($,{size:"14",class:"mr-1 align-middle"},{default:O(()=>[b(ue(Oe))]),_:1}),y[8]||(y[8]=T("github 地址 "))]),_:1})]),_:1})]),default:O(()=>[j("div",null,[b(p,{"content-position":"left"},{default:O(()=>[T(" 基础使用: 已选时间 "+q(k(v.value)),1)]),_:1}),b(ee,{modelValue:v.value,"onUpdate:modelValue":y[0]||(y[0]=s=>v.value=s)},null,8,["modelValue"]),b(p,{"content-position":"left"},{default:O(()=>[T(" 默认选中时间: 已选时间 "+q(k(U.value)),1)]),_:1}),b(ee,{modelValue:U.value,"onUpdate:modelValue":y[1]||(y[1]=s=>U.value=s)},null,8,["modelValue"]),b(p,{"content-position":"left"},{default:O(()=>[T(" 自定义选中高亮颜色（activeColor） 已选时间 "+q(k(B.value)),1)]),_:1}),b(ee,de({modelValue:B.value,"onUpdate:modelValue":y[2]||(y[2]=s=>B.value=s)},ue(ce)(E,["activeColor"])),null,16,["modelValue"]),b(p,{"content-position":"left"},{default:O(()=>[T(" 指定可选范围（minHour：9，maxHour: 18） 已选时间 "+q(k(F.value)),1)]),_:1}),b(ee,{modelValue:F.value,"onUpdate:modelValue":y[3]||(y[3]=s=>F.value=s),"min-hour":9,"max-hour":18},null,8,["modelValue"]),b(p,{"content-position":"left"},{default:O(()=>[T(" 只读（readonly）和禁用过去时间（disabledBefore） 已选时间 "+q(k(Y.value)),1)]),_:1}),b(ee,de({modelValue:Y.value,"onUpdate:modelValue":y[4]||(y[4]=s=>Y.value=s)},ue(ce)(E,["readonly","disabledBefore"])),null,16,["modelValue"]),b(p,{"content-position":"left"},{default:O(()=>y[9]||(y[9]=[T("自定义时间间隔（step: 60|30|20|15|10）")])),_:1}),(P(!0),K(se,null,oe(Object.keys(C).reverse(),s=>(P(),K(se,{key:s},[j("p",We,"每隔 "+q(s)+" 分钟 已选时间："+q(k(J(s))),1),b(ee,{"model-value":J(s),step:s,onChange:t=>te(t,s)},null,8,["model-value","step","onChange"])],64))),128))])]),_:1})}}};export{Ue as default};
