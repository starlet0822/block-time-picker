import{_ as ve,u as me,r as V,c as he,o as pe,n as ge,t as $e,a as K,b as P,d as j,F as ie,e as oe,f as q,g as ye,h as _e,i as Me,w as O,E as be,j as Se,k as b,l as De,m as T,p as de,q as ue,s as ce,v as we,x as xe,y as ke,z as He,A as Oe,B as Ve}from"./index-BTjKxOdy.js";function Ce(S){return S&&S.__esModule&&Object.prototype.hasOwnProperty.call(S,"default")?S.default:S}var se={exports:{}},Te=se.exports,fe;function Ie(){return fe||(fe=1,function(S,U){(function(v,I){S.exports=I()})(Te,function(){var v=1e3,I=6e4,F=36e5,Y="millisecond",g="second",l="minute",m="hour",x="day",W="week",C="month",E="quarter",R="year",k="date",J="Invalid Date",te=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,L=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(u){var n=["th","st","nd","rd"],e=u%100;return"["+u+(n[(e-20)%10]||n[e]||n[0])+"]"}},$=function(u,n,e){var r=String(u);return!r||r.length>=n?u:""+Array(n+1-r.length).join(e)+u},h={s:$,z:function(u){var n=-u.utcOffset(),e=Math.abs(n),r=Math.floor(e/60),a=e%60;return(n<=0?"+":"-")+$(r,2,"0")+":"+$(a,2,"0")},m:function u(n,e){if(n.date()<e.date())return-u(e,n);var r=12*(e.year()-n.year())+(e.month()-n.month()),a=n.clone().add(r,C),d=e-a<0,c=n.clone().add(r+(d?-1:1),C);return+(-(r+(e-a)/(d?a-c:c-a))||0)},a:function(u){return u<0?Math.ceil(u)||0:Math.floor(u)},p:function(u){return{M:C,y:R,w:W,d:x,D:k,h:m,m:l,s:g,ms:Y,Q:E}[u]||String(u||"").toLowerCase().replace(/s$/,"")},u:function(u){return u===void 0}},o="en",s={};s[o]=y;var f="$isDayjsObject",p=function(u){return u instanceof A||!(!u||!u[f])},D=function u(n,e,r){var a;if(!n)return o;if(typeof n=="string"){var d=n.toLowerCase();s[d]&&(a=d),e&&(s[d]=e,a=d);var c=n.split("-");if(!a&&c.length>1)return u(c[0])}else{var _=n.name;s[_]=n,a=_}return!r&&a&&(o=a),a||!r&&o},i=function(u,n){if(p(u))return u.clone();var e=typeof n=="object"?n:{};return e.date=u,e.args=arguments,new A(e)},t=h;t.l=D,t.i=p,t.w=function(u,n){return i(u,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var A=function(){function u(e){this.$L=D(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[f]=!0}var n=u.prototype;return n.parse=function(e){this.$d=function(r){var a=r.date,d=r.utc;if(a===null)return new Date(NaN);if(t.u(a))return new Date;if(a instanceof Date)return new Date(a);if(typeof a=="string"&&!/Z$/i.test(a)){var c=a.match(te);if(c){var _=c[2]-1||0,M=(c[7]||"0").substring(0,3);return d?new Date(Date.UTC(c[1],_,c[3]||1,c[4]||0,c[5]||0,c[6]||0,M)):new Date(c[1],_,c[3]||1,c[4]||0,c[5]||0,c[6]||0,M)}}return new Date(a)}(e),this.init()},n.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},n.$utils=function(){return t},n.isValid=function(){return this.$d.toString()!==J},n.isSame=function(e,r){var a=i(e);return this.startOf(r)<=a&&a<=this.endOf(r)},n.isAfter=function(e,r){return i(e)<this.startOf(r)},n.isBefore=function(e,r){return this.endOf(r)<i(e)},n.$g=function(e,r,a){return t.u(e)?this[r]:this.set(a,e)},n.unix=function(){return Math.floor(this.valueOf()/1e3)},n.valueOf=function(){return this.$d.getTime()},n.startOf=function(e,r){var a=this,d=!!t.u(r)||r,c=t.p(e),_=function(G,B){var z=t.w(a.$u?Date.UTC(a.$y,B,G):new Date(a.$y,B,G),a);return d?z:z.endOf(x)},M=function(G,B){return t.w(a.toDate()[G].apply(a.toDate("s"),(d?[0,0,0,0]:[23,59,59,999]).slice(B)),a)},w=this.$W,H=this.$M,N=this.$D,X="set"+(this.$u?"UTC":"");switch(c){case R:return d?_(1,0):_(31,11);case C:return d?_(1,H):_(0,H+1);case W:var Q=this.$locale().weekStart||0,ne=(w<Q?w+7:w)-Q;return _(d?N-ne:N+(6-ne),H);case x:case k:return M(X+"Hours",0);case m:return M(X+"Minutes",1);case l:return M(X+"Seconds",2);case g:return M(X+"Milliseconds",3);default:return this.clone()}},n.endOf=function(e){return this.startOf(e,!1)},n.$set=function(e,r){var a,d=t.p(e),c="set"+(this.$u?"UTC":""),_=(a={},a[x]=c+"Date",a[k]=c+"Date",a[C]=c+"Month",a[R]=c+"FullYear",a[m]=c+"Hours",a[l]=c+"Minutes",a[g]=c+"Seconds",a[Y]=c+"Milliseconds",a)[d],M=d===x?this.$D+(r-this.$W):r;if(d===C||d===R){var w=this.clone().set(k,1);w.$d[_](M),w.init(),this.$d=w.set(k,Math.min(this.$D,w.daysInMonth())).$d}else _&&this.$d[_](M);return this.init(),this},n.set=function(e,r){return this.clone().$set(e,r)},n.get=function(e){return this[t.p(e)]()},n.add=function(e,r){var a,d=this;e=Number(e);var c=t.p(r),_=function(H){var N=i(d);return t.w(N.date(N.date()+Math.round(H*e)),d)};if(c===C)return this.set(C,this.$M+e);if(c===R)return this.set(R,this.$y+e);if(c===x)return _(1);if(c===W)return _(7);var M=(a={},a[l]=I,a[m]=F,a[g]=v,a)[c]||1,w=this.$d.getTime()+e*M;return t.w(w,this)},n.subtract=function(e,r){return this.add(-1*e,r)},n.format=function(e){var r=this,a=this.$locale();if(!this.isValid())return a.invalidDate||J;var d=e||"YYYY-MM-DDTHH:mm:ssZ",c=t.z(this),_=this.$H,M=this.$m,w=this.$M,H=a.weekdays,N=a.months,X=a.meridiem,Q=function(B,z,ae,re){return B&&(B[z]||B(r,d))||ae[z].slice(0,re)},ne=function(B){return t.s(_%12||12,B,"0")},G=X||function(B,z,ae){var re=B<12?"AM":"PM";return ae?re.toLowerCase():re};return d.replace(L,function(B,z){return z||function(ae){switch(ae){case"YY":return String(r.$y).slice(-2);case"YYYY":return t.s(r.$y,4,"0");case"M":return w+1;case"MM":return t.s(w+1,2,"0");case"MMM":return Q(a.monthsShort,w,N,3);case"MMMM":return Q(N,w);case"D":return r.$D;case"DD":return t.s(r.$D,2,"0");case"d":return String(r.$W);case"dd":return Q(a.weekdaysMin,r.$W,H,2);case"ddd":return Q(a.weekdaysShort,r.$W,H,3);case"dddd":return H[r.$W];case"H":return String(_);case"HH":return t.s(_,2,"0");case"h":return ne(1);case"hh":return ne(2);case"a":return G(_,M,!0);case"A":return G(_,M,!1);case"m":return String(M);case"mm":return t.s(M,2,"0");case"s":return String(r.$s);case"ss":return t.s(r.$s,2,"0");case"SSS":return t.s(r.$ms,3,"0");case"Z":return c}return null}(B)||c.replace(":","")})},n.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},n.diff=function(e,r,a){var d,c=this,_=t.p(r),M=i(e),w=(M.utcOffset()-this.utcOffset())*I,H=this-M,N=function(){return t.m(c,M)};switch(_){case R:d=N()/12;break;case C:d=N();break;case E:d=N()/3;break;case W:d=(H-w)/6048e5;break;case x:d=(H-w)/864e5;break;case m:d=H/F;break;case l:d=H/I;break;case g:d=H/v;break;default:d=H}return a?d:t.a(d)},n.daysInMonth=function(){return this.endOf(C).$D},n.$locale=function(){return s[this.$L]},n.locale=function(e,r){if(!e)return this.$L;var a=this.clone(),d=D(e,r,!0);return d&&(a.$L=d),a},n.clone=function(){return t.w(this.$d,this)},n.toDate=function(){return new Date(this.valueOf())},n.toJSON=function(){return this.isValid()?this.toISOString():null},n.toISOString=function(){return this.$d.toISOString()},n.toString=function(){return this.$d.toUTCString()},u}(),Z=A.prototype;return i.prototype=Z,[["$ms",Y],["$s",g],["$m",l],["$H",m],["$W",x],["$M",C],["$y",R],["$D",k]].forEach(function(u){Z[u[1]]=function(n){return this.$g(n,u[0],u[1])}}),i.extend=function(u,n){return u.$i||(u(n,A,i),u.$i=!0),i},i.locale=D,i.isDayjs=p,i.unix=function(u){return i(1e3*u)},i.en=s[o],i.Ls=s,i.p={},i})}(se)),se.exports}var Be=Ie();const le=Ce(Be),Re=S=>{const U=Math.floor(S/60).toString().padStart(2,"0"),v=String(S%60).padStart(2,"0");return`${U}:${v}`},je={class:"block-time-picker"},Ye={class:"time-wrapper"},Ne={class:"time-text"},Ee={class:"time-full"},Le=["data-val","data-idx","title","onClick","onMousemove","onMouseleave"],We={__name:"WebTimePicker",props:{modelValue:{type:Array,default:()=>[]},minHour:{type:[Number,String],default:"0"},maxHour:{type:[Number,String],default:"23"},step:{type:[Number,String],default:30,validator:S=>60%parseInt(S)===0},rangeSeparator:{type:String,default:" ~ "},activeColor:{type:String,default:"#2e6cf3"},inactiveColor:{type:String,default:"#a0a6ae"},readonly:Boolean,disabledBefore:Boolean,size:{type:String,default:"default",validatior(S){return["large","default","small"].includes(S)}}},emits:["update:modelValue","change"],setup(S,{emit:U}){me($=>({"2f6baada":S.inactiveColor,"49ec5cc2":S.activeColor}));const v=S,I=U,F=V(0),Y=V([]),g=V([]),l=V(),m=V(),x=V(),W=he(()=>{let $=[];return l.value!==void 0&&x.value!==void 0&&($=[l.value,x.value].sort((h,o)=>h-o)),$});pe(()=>{k(),J(),C()});const C=async()=>{var $,h;await ge(),F.value=(h=($=document.querySelector(".time-bar"))==null?void 0:$.getBoundingClientRect())==null?void 0:h.width},E=$=>String(Math.floor($/60)).padStart(2,"0"),R=()=>{let $=[];if(g.value.length===0){$=[],I("update:modelValue",$),I("change",$);return}const h=+v.minHour*60+Number(v.step)*l.value+Number(v.step),o=+v.minHour*60+Number(v.step)*m.value+Number(v.step);let s,f,p,D,i,t;h&&o?(p=E(h-+v.step),s=E(o),D=(h-+v.step)%60===0?"00":Math.round(((h-+v.step)/60-p)*60),f=o%60===0?"00":Math.round((o/60-s)*60),i=p+":"+D,+s==24&&(s=23,f=59),t=s+":"+f):(p=E(h-+v.step),s=E(h),D=(h-+v.step)%60===0?"00":Math.round(((h-+v.step)/60-p)*60),f=h%60===0?"00":Math.round((h/60-s)*60),i=p+":"+D,+s==24&&(s=23,f=59),t=s+":"+f),$=[i,t],I("update:modelValue",$),I("change",$)},k=()=>{const $=new Date().getHours(),h=new Date().getMinutes(),o=[],s=f=>{const p=[],D=60/+v.step*(f-+v.minHour),i=(t,A)=>{if(!v.disabledBefore)return!1;if(t<$)return!0;if($===t){const Z=+v.step*(A-1),u=+v.step*A;if(h>=Z&&h<=u||h>=u)return!0}};for(let t=1;t<=60/+v.step;t++){const A=f*60+v.step*t,Z=Re(A),u=le(le().format("YYYY-MM-DD")+" "+Z),n=le(u).subtract(v.step,"minute").format("HH:mm");p.push({title:`${n} - ${Z}`,value:A,selected:!1,disabled:i(f,t),index:D+t-1})}return p};for(let f=+v.minHour;f<=+v.maxHour;f++){const p={time:void 0,blocks:s(f)};p.time=E(f*60),o.push(p)}Y.value=o},J=()=>{const{modelValue:$,step:h}=$e(v);if(Array.isArray($.value)){if($.value.length===2){const o=t=>t.split(":")[0].padStart(2,"0"),s=t=>t.split(":")[1].padStart(2,"0");let f=0,p=0;const[D,i]=$.value;if(f=Y.value.findIndex(t=>t.time===o(D)),p=Y.value.findIndex(t=>t.time===o(i)),l.value=f*(60/h.value),m.value=p*(60/h.value),parseInt(s(D))==h.value){const t=s(D)/h.value;l.value=l.value+(t>0?t:0)}else{const t=s(D)/h.value;l.value=l.value+(t>0?t:0)}if(parseInt(s(i))===0)m.value=m.value-1;else if(parseInt(s(i))===59){const t=60/h.value;m.value=m.value-1+(t>0?t:0)}else{const t=s(i)/h.value;m.value=m.value-1+(t>0?t:0)}for(let t=l.value;t<=m.value;t++)g.value.splice(t-l.value,0,t)}}else throw new Error("modelValue must be a array, and the maxlength should be zero or two.")},te=($,h,o)=>{if(v.readonly)return!1;if(v.disabledBefore&&k(),!h.disabled){if(x.value=void 0,l.value===void 0&&m.value===void 0)l.value=g.value[0]=o;else if(l.value!==void 0&&m.value===void 0){if(o===l.value&&g.value.indexOf(o)>-1&&(g.value.splice(g.value.indexOf(o),1),l.value=m.value=void 0),o>l.value){m.value=o,g.value.splice(0);for(let s=l.value;s<=m.value;s++)g.value.splice(s-l.value,0,s)}if(o<l.value){const[s,f]=[o,l.value];l.value=s,m.value=f,g.value.splice(0);for(let p=l.value;p<=m.value;p++)g.value.splice(p-l.value,0,p)}}else if(l.value!==void 0&&m.value!==void 0){if(o===l.value){const s=g.value.indexOf(o);g.value.splice(s,1),g.value.length?l.value=g.value[0]:l.value=m.value=void 0}else if(o===m.value){const s=g.value.indexOf(o);g.value.splice(s,1),m.value=g.value[g.value.length-1],l.value===m.value&&(m.value=void 0)}else if(o<l.value)g.value.splice(0),l.value=m.value=void 0;else if(o>l.value){m.value=o,g.value.splice(0);for(let s=l.value;s<=m.value;s++)g.value.splice(s-l.value,0,s)}}R()}},L=$=>{v.readonly||g.value.length>1||l.value===void 0||(x.value=$)},y=()=>{v.readonly||g.value.length>1||l.value===void 0||(x.value=void 0)};return($,h)=>(P(),K("div",je,[j("div",Ye,[(P(!0),K(ie,null,oe(Y.value,(o,s)=>(P(),K("div",{key:o.time+s,class:"time-bar"},[j("span",Ne,q(o.time),1),j("div",Ee,[(P(!0),K(ie,null,oe(o.blocks,f=>(P(),K("div",{key:f.value,"data-val":f.value,"data-idx":f.index,title:f.title,class:ye(["time-block",{"time-block--selected":g.value.includes(f.index)||x.value==f.index,"time-block--readonly":S.readonly,"time-block--disabled":f.disabled,"in-range":W.value.length==2&&f.index>W.value[0]&&f.index<W.value[1]}]),onClick:p=>te(o,f,f.index),onMousemove:p=>L(f.index),onMouseleave:p=>y(f.index)},null,42,Le))),128))])]))),128))])]))}},ee=ve(We,[["__scopeId","data-v-4ac78f70"]]),Ae={class:"flex-c"},Ue={class:"my-2"},ze={__name:"web-time-picker",setup(S){const U=V(["09:00","18:00"]),v=V([]),I=V([]),F=V([]),Y=V([]),g=V(["09:00","23:59"]),l=V(["09:30","18:30"]),m=V(["09:40","16:00"]),x=V(["09:45","13:30"]),W=V(["09:50","12:30"]),C={10:"10分",15:"15分",20:"20分",30:"30分",60:"60分"},E=_e({minHour:"0",maxHour:"23",step:30,activeColor:"#FFCD5E",readonly:!0,disabledBefore:!0}),R=new Map([[10,W],[15,x],[20,m],[30,l],[60,g]]),k=L=>L.length?L.join(" ~ "):"-";function J(L){return R.get(+L).value}const te=(L,y)=>{R.get(+y).value=L};return(L,y)=>{const $=ke,h=xe,o=Oe,s=Se("RouterLink"),f=we,p=De,D=be;return P(),Me(D,{shadow:"never"},{header:O(()=>[b(f,{type:"flex",align:"middle",justify:"space-between"},{default:O(()=>[j("div",Ae,[y[7]||(y[7]=T(" 块状时间段选择组件(web端)  ")),b(h,{trigger:"click"},{content:O(()=>y[5]||(y[5]=[j("p",null,[T(" 操作交互逻辑："),j("br"),T(" 1.当选择了某一节，点击该节之前则是选择开始时间，点击该节之后则是选择结束时间；"),j("br"),T(" 2.开始和结束时间均选择完毕，选择高亮区域之前则重置，选择高亮区域之后则是重新选择结束时间；"),j("br"),T(" 3.开始和结束时间均选择完毕，往前选择则重置，往后选择则是选择结束时间；"),j("br"),T(" 3.开始和结束时间均选择完毕，点击高亮区域中间（不含第一节或最后一节），则是重新选择结束时间；"),j("br"),T(" 4.开始和结束时间均选择完毕，点击高亮区域第一节或最后一节均是取消选择该时间。"),j("br")],-1)])),default:O(()=>[b($,{class:"cursor-pointer"},{default:O(()=>[b(ue(He))]),_:1})]),_:1}),b(s,{to:"/mobie"},{default:O(()=>[b(o,{class:"ml-2"},{default:O(()=>y[6]||(y[6]=[T("前往移动端(mobie)版本")])),_:1})]),_:1})]),b(o,{href:"https://github.com/starlet0822/block-time-picker",target:"_blank"},{default:O(()=>[b($,{size:"14",class:"mr-1 align-middle"},{default:O(()=>[b(ue(Ve))]),_:1}),y[8]||(y[8]=T("github 地址 "))]),_:1})]),_:1})]),default:O(()=>[j("div",null,[b(p,{"content-position":"left"},{default:O(()=>[T(" 基础使用: 已选时间 "+q(k(v.value)),1)]),_:1}),b(ee,{modelValue:v.value,"onUpdate:modelValue":y[0]||(y[0]=i=>v.value=i)},null,8,["modelValue"]),b(p,{"content-position":"left"},{default:O(()=>[T(" 默认选中时间: 已选时间 "+q(k(U.value)),1)]),_:1}),b(ee,{modelValue:U.value,"onUpdate:modelValue":y[1]||(y[1]=i=>U.value=i)},null,8,["modelValue"]),b(p,{"content-position":"left"},{default:O(()=>[T(" 自定义选中高亮颜色（activeColor） 已选时间 "+q(k(I.value)),1)]),_:1}),b(ee,de({modelValue:I.value,"onUpdate:modelValue":y[2]||(y[2]=i=>I.value=i)},ue(ce)(E,["activeColor"])),null,16,["modelValue"]),b(p,{"content-position":"left"},{default:O(()=>[T(" 指定可选范围（minHour：9，maxHour: 18） 已选时间 "+q(k(F.value)),1)]),_:1}),b(ee,{modelValue:F.value,"onUpdate:modelValue":y[3]||(y[3]=i=>F.value=i),"min-hour":9,"max-hour":18},null,8,["modelValue"]),b(p,{"content-position":"left"},{default:O(()=>[T(" 只读（readonly）和禁用过去时间（disabledBefore） 已选时间 "+q(k(Y.value)),1)]),_:1}),b(ee,de({modelValue:Y.value,"onUpdate:modelValue":y[4]||(y[4]=i=>Y.value=i)},ue(ce)(E,["readonly","disabledBefore"])),null,16,["modelValue"]),b(p,{"content-position":"left"},{default:O(()=>y[9]||(y[9]=[T("自定义时间间隔（step: 60|30|20|15|10）")])),_:1}),(P(!0),K(ie,null,oe(Object.keys(C).reverse(),i=>(P(),K(ie,{key:i},[j("p",Ue,"每隔 "+q(i)+" 分钟 已选时间："+q(k(J(i))),1),b(ee,{"model-value":J(i),step:i,onChange:t=>te(t,i)},null,8,["model-value","step","onChange"])],64))),128))])]),_:1})}}};export{ze as default};
