import{_ as ve,u as me,r as O,c as he,o as pe,n as $e,t as ge,a as K,b as P,d as B,F as se,e as oe,f as q,g as ye,h as _e,i as Me,w as I,E as Se,j as be,k as w,l as De,m as R,p as de,q as ie,s as ce,v as we,x as xe,y as ke,z as He,A as Oe}from"./index-K58GystJ.js";function Ve(S){return S&&S.__esModule&&Object.prototype.hasOwnProperty.call(S,"default")?S.default:S}var ue={exports:{}},Ce=ue.exports,fe;function Te(){return fe||(fe=1,function(S,U){(function(v,C){S.exports=C()})(Ce,function(){var v=1e3,C=6e4,F=36e5,Y="millisecond",$="second",l="minute",m="hour",x="day",W="week",V="month",E="quarter",j="year",k="date",J="Invalid Date",te=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,L=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(u){var n=["th","st","nd","rd"],e=u%100;return"["+u+(n[(e-20)%10]||n[e]||n[0])+"]"}},g=function(u,n,e){var r=String(u);return!r||r.length>=n?u:""+Array(n+1-r.length).join(e)+u},h={s:g,z:function(u){var n=-u.utcOffset(),e=Math.abs(n),r=Math.floor(e/60),a=e%60;return(n<=0?"+":"-")+g(r,2,"0")+":"+g(a,2,"0")},m:function u(n,e){if(n.date()<e.date())return-u(e,n);var r=12*(e.year()-n.year())+(e.month()-n.month()),a=n.clone().add(r,V),d=e-a<0,c=n.clone().add(r+(d?-1:1),V);return+(-(r+(e-a)/(d?a-c:c-a))||0)},a:function(u){return u<0?Math.ceil(u)||0:Math.floor(u)},p:function(u){return{M:V,y:j,w:W,d:x,D:k,h:m,m:l,s:$,ms:Y,Q:E}[u]||String(u||"").toLowerCase().replace(/s$/,"")},u:function(u){return u===void 0}},o="en",s={};s[o]=_;var f="$isDayjsObject",p=function(u){return u instanceof A||!(!u||!u[f])},b=function u(n,e,r){var a;if(!n)return o;if(typeof n=="string"){var d=n.toLowerCase();s[d]&&(a=d),e&&(s[d]=e,a=d);var c=n.split("-");if(!a&&c.length>1)return u(c[0])}else{var y=n.name;s[y]=n,a=y}return!r&&a&&(o=a),a||!r&&o},i=function(u,n){if(p(u))return u.clone();var e=typeof n=="object"?n:{};return e.date=u,e.args=arguments,new A(e)},t=h;t.l=b,t.i=p,t.w=function(u,n){return i(u,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var A=function(){function u(e){this.$L=b(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[f]=!0}var n=u.prototype;return n.parse=function(e){this.$d=function(r){var a=r.date,d=r.utc;if(a===null)return new Date(NaN);if(t.u(a))return new Date;if(a instanceof Date)return new Date(a);if(typeof a=="string"&&!/Z$/i.test(a)){var c=a.match(te);if(c){var y=c[2]-1||0,M=(c[7]||"0").substring(0,3);return d?new Date(Date.UTC(c[1],y,c[3]||1,c[4]||0,c[5]||0,c[6]||0,M)):new Date(c[1],y,c[3]||1,c[4]||0,c[5]||0,c[6]||0,M)}}return new Date(a)}(e),this.init()},n.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},n.$utils=function(){return t},n.isValid=function(){return this.$d.toString()!==J},n.isSame=function(e,r){var a=i(e);return this.startOf(r)<=a&&a<=this.endOf(r)},n.isAfter=function(e,r){return i(e)<this.startOf(r)},n.isBefore=function(e,r){return this.endOf(r)<i(e)},n.$g=function(e,r,a){return t.u(e)?this[r]:this.set(a,e)},n.unix=function(){return Math.floor(this.valueOf()/1e3)},n.valueOf=function(){return this.$d.getTime()},n.startOf=function(e,r){var a=this,d=!!t.u(r)||r,c=t.p(e),y=function(G,T){var z=t.w(a.$u?Date.UTC(a.$y,T,G):new Date(a.$y,T,G),a);return d?z:z.endOf(x)},M=function(G,T){return t.w(a.toDate()[G].apply(a.toDate("s"),(d?[0,0,0,0]:[23,59,59,999]).slice(T)),a)},D=this.$W,H=this.$M,N=this.$D,X="set"+(this.$u?"UTC":"");switch(c){case j:return d?y(1,0):y(31,11);case V:return d?y(1,H):y(0,H+1);case W:var Q=this.$locale().weekStart||0,ne=(D<Q?D+7:D)-Q;return y(d?N-ne:N+(6-ne),H);case x:case k:return M(X+"Hours",0);case m:return M(X+"Minutes",1);case l:return M(X+"Seconds",2);case $:return M(X+"Milliseconds",3);default:return this.clone()}},n.endOf=function(e){return this.startOf(e,!1)},n.$set=function(e,r){var a,d=t.p(e),c="set"+(this.$u?"UTC":""),y=(a={},a[x]=c+"Date",a[k]=c+"Date",a[V]=c+"Month",a[j]=c+"FullYear",a[m]=c+"Hours",a[l]=c+"Minutes",a[$]=c+"Seconds",a[Y]=c+"Milliseconds",a)[d],M=d===x?this.$D+(r-this.$W):r;if(d===V||d===j){var D=this.clone().set(k,1);D.$d[y](M),D.init(),this.$d=D.set(k,Math.min(this.$D,D.daysInMonth())).$d}else y&&this.$d[y](M);return this.init(),this},n.set=function(e,r){return this.clone().$set(e,r)},n.get=function(e){return this[t.p(e)]()},n.add=function(e,r){var a,d=this;e=Number(e);var c=t.p(r),y=function(H){var N=i(d);return t.w(N.date(N.date()+Math.round(H*e)),d)};if(c===V)return this.set(V,this.$M+e);if(c===j)return this.set(j,this.$y+e);if(c===x)return y(1);if(c===W)return y(7);var M=(a={},a[l]=C,a[m]=F,a[$]=v,a)[c]||1,D=this.$d.getTime()+e*M;return t.w(D,this)},n.subtract=function(e,r){return this.add(-1*e,r)},n.format=function(e){var r=this,a=this.$locale();if(!this.isValid())return a.invalidDate||J;var d=e||"YYYY-MM-DDTHH:mm:ssZ",c=t.z(this),y=this.$H,M=this.$m,D=this.$M,H=a.weekdays,N=a.months,X=a.meridiem,Q=function(T,z,ae,re){return T&&(T[z]||T(r,d))||ae[z].slice(0,re)},ne=function(T){return t.s(y%12||12,T,"0")},G=X||function(T,z,ae){var re=T<12?"AM":"PM";return ae?re.toLowerCase():re};return d.replace(L,function(T,z){return z||function(ae){switch(ae){case"YY":return String(r.$y).slice(-2);case"YYYY":return t.s(r.$y,4,"0");case"M":return D+1;case"MM":return t.s(D+1,2,"0");case"MMM":return Q(a.monthsShort,D,N,3);case"MMMM":return Q(N,D);case"D":return r.$D;case"DD":return t.s(r.$D,2,"0");case"d":return String(r.$W);case"dd":return Q(a.weekdaysMin,r.$W,H,2);case"ddd":return Q(a.weekdaysShort,r.$W,H,3);case"dddd":return H[r.$W];case"H":return String(y);case"HH":return t.s(y,2,"0");case"h":return ne(1);case"hh":return ne(2);case"a":return G(y,M,!0);case"A":return G(y,M,!1);case"m":return String(M);case"mm":return t.s(M,2,"0");case"s":return String(r.$s);case"ss":return t.s(r.$s,2,"0");case"SSS":return t.s(r.$ms,3,"0");case"Z":return c}return null}(T)||c.replace(":","")})},n.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},n.diff=function(e,r,a){var d,c=this,y=t.p(r),M=i(e),D=(M.utcOffset()-this.utcOffset())*C,H=this-M,N=function(){return t.m(c,M)};switch(y){case j:d=N()/12;break;case V:d=N();break;case E:d=N()/3;break;case W:d=(H-D)/6048e5;break;case x:d=(H-D)/864e5;break;case m:d=H/F;break;case l:d=H/C;break;case $:d=H/v;break;default:d=H}return a?d:t.a(d)},n.daysInMonth=function(){return this.endOf(V).$D},n.$locale=function(){return s[this.$L]},n.locale=function(e,r){if(!e)return this.$L;var a=this.clone(),d=b(e,r,!0);return d&&(a.$L=d),a},n.clone=function(){return t.w(this.$d,this)},n.toDate=function(){return new Date(this.valueOf())},n.toJSON=function(){return this.isValid()?this.toISOString():null},n.toISOString=function(){return this.$d.toISOString()},n.toString=function(){return this.$d.toUTCString()},u}(),Z=A.prototype;return i.prototype=Z,[["$ms",Y],["$s",$],["$m",l],["$H",m],["$W",x],["$M",V],["$y",j],["$D",k]].forEach(function(u){Z[u[1]]=function(n){return this.$g(n,u[0],u[1])}}),i.extend=function(u,n){return u.$i||(u(n,A,i),u.$i=!0),i},i.locale=b,i.isDayjs=p,i.unix=function(u){return i(1e3*u)},i.en=s[o],i.Ls=s,i.p={},i})}(ue)),ue.exports}var Ie=Te();const le=Ve(Ie),Re=S=>{const U=Math.floor(S/60).toString().padStart(2,"0"),v=String(S%60).padStart(2,"0");return`${U}:${v}`},je={class:"block-time-picker"},Be={class:"time-wrapper"},Ye={class:"time-text"},Ne={class:"time-full"},Ee=["data-val","data-idx","title","onClick","onMousemove","onMouseleave"],Le={__name:"WebTimePicker",props:{modelValue:{type:Array,default:()=>[]},minHour:{type:[Number,String],default:"0"},maxHour:{type:[Number,String],default:"23"},step:{type:[Number,String],default:30,validator:S=>60%parseInt(S)===0},rangeSeparator:{type:String,default:" ~ "},activeColor:{type:String,default:"#2e6cf3"},inactiveColor:{type:String,default:"#a0a6ae"},readonly:Boolean,disabledBefore:Boolean,size:{type:String,default:"default",validatior(S){return["large","default","small"].includes(S)}}},emits:["update:modelValue","change"],setup(S,{emit:U}){me(g=>({"2f6baada":S.inactiveColor,"49ec5cc2":S.activeColor}));const v=S,C=U,F=O(0),Y=O([]),$=O([]),l=O(),m=O(),x=O(),W=he(()=>{let g=[];return l.value!==void 0&&x.value!==void 0&&(g=[l.value,x.value].sort((h,o)=>h-o)),g});pe(()=>{k(),J(),V()});const V=async()=>{var g,h;await $e(),F.value=(h=(g=document.querySelector(".time-bar"))==null?void 0:g.getBoundingClientRect())==null?void 0:h.width},E=g=>String(Math.floor(g/60)).padStart(2,"0"),j=()=>{let g=[];if($.value.length===0){g=[],C("update:modelValue",g),C("change",g);return}const h=+v.minHour*60+Number(v.step)*l.value+Number(v.step),o=+v.minHour*60+Number(v.step)*m.value+Number(v.step);let s,f,p,b,i,t;h&&o?(p=E(h-+v.step),s=E(o),b=(h-+v.step)%60===0?"00":Math.round(((h-+v.step)/60-p)*60),f=o%60===0?"00":Math.round((o/60-s)*60),i=p+":"+b,+s==24&&(s=23,f=59),t=s+":"+f):(p=E(h-+v.step),s=E(h),b=(h-+v.step)%60===0?"00":Math.round(((h-+v.step)/60-p)*60),f=h%60===0?"00":Math.round((h/60-s)*60),i=p+":"+b,+s==24&&(s=23,f=59),t=s+":"+f),g=[i,t],C("update:modelValue",g),C("change",g)},k=()=>{const g=new Date().getHours(),h=new Date().getMinutes(),o=[],s=f=>{const p=[],b=60/+v.step*(f-+v.minHour),i=(t,A)=>{if(!v.disabledBefore)return!1;if(t<g)return!0;if(g===t){const Z=+v.step*(A-1),u=+v.step*A;if(h>=Z&&h<=u||h>=u)return!0}};for(let t=1;t<=60/+v.step;t++){const A=f*60+v.step*t,Z=Re(A),u=le(le().format("YYYY-MM-DD")+" "+Z),n=le(u).subtract(v.step,"minute").format("HH:mm");p.push({title:`${n} - ${Z}`,value:A,selected:!1,disabled:i(f,t),index:b+t-1})}return p};for(let f=+v.minHour;f<=+v.maxHour;f++){const p={time:void 0,blocks:s(f)};p.time=E(f*60),o.push(p)}Y.value=o},J=()=>{const{modelValue:g,step:h}=ge(v);if(Array.isArray(g.value)){if(g.value.length===2){const o=t=>t.split(":")[0].padStart(2,"0"),s=t=>t.split(":")[1].padStart(2,"0");let f=0,p=0;const[b,i]=g.value;if(f=Y.value.findIndex(t=>t.time===o(b)),p=Y.value.findIndex(t=>t.time===o(i)),l.value=f*(60/h.value),m.value=p*(60/h.value),parseInt(s(b))==h.value){const t=s(b)/h.value;l.value=l.value+(t>0?t:0)}else{const t=s(b)/h.value;l.value=l.value+(t>0?t:0)}if(parseInt(s(i))===0)m.value=m.value-1;else if(parseInt(s(i))===59){const t=60/h.value;m.value=m.value-1+(t>0?t:0)}else{const t=s(i)/h.value;m.value=m.value-1+(t>0?t:0)}for(let t=l.value;t<=m.value;t++)$.value.splice(t-l.value,0,t)}}else throw new Error("modelValue must be a array, and the maxlength should be zero or two.")},te=(g,h,o)=>{if(v.readonly)return!1;if(v.disabledBefore&&k(),!h.disabled){if(x.value=void 0,l.value===void 0&&m.value===void 0)l.value=$.value[0]=o;else if(l.value!==void 0&&m.value===void 0){if(o===l.value&&$.value.indexOf(o)>-1&&($.value.splice($.value.indexOf(o),1),l.value=m.value=void 0),o>l.value){m.value=o,$.value.splice(0);for(let s=l.value;s<=m.value;s++)$.value.splice(s-l.value,0,s)}if(o<l.value){const[s,f]=[o,l.value];l.value=s,m.value=f,$.value.splice(0);for(let p=l.value;p<=m.value;p++)$.value.splice(p-l.value,0,p)}}else if(l.value!==void 0&&m.value!==void 0){if(o===l.value){const s=$.value.indexOf(o);$.value.splice(s,1),$.value.length?l.value=$.value[0]:l.value=m.value=void 0}else if(o===m.value){const s=$.value.indexOf(o);$.value.splice(s,1),m.value=$.value[$.value.length-1],l.value===m.value&&(m.value=void 0)}else if(o<l.value)$.value.splice(0),l.value=m.value=void 0;else if(o>l.value){m.value=o,$.value.splice(0);for(let s=l.value;s<=m.value;s++)$.value.splice(s-l.value,0,s)}}j()}},L=g=>{v.readonly||$.value.length>1||l.value===void 0||(x.value=g)},_=()=>{v.readonly||$.value.length>1||l.value===void 0||(x.value=void 0)};return(g,h)=>(P(),K("div",je,[B("div",Be,[(P(!0),K(se,null,oe(Y.value,(o,s)=>(P(),K("div",{key:o.time+s,class:"time-bar"},[B("span",Ye,q(o.time),1),B("div",Ne,[(P(!0),K(se,null,oe(o.blocks,f=>(P(),K("div",{key:f.value,"data-val":f.value,"data-idx":f.index,title:f.title,class:ye(["time-block",{"time-block--selected":$.value.includes(f.index)||x.value==f.index,"time-block--readonly":S.readonly,"time-block--disabled":f.disabled,"in-range":W.value.length==2&&f.index>W.value[0]&&f.index<W.value[1]}]),onClick:p=>te(o,f,f.index),onMousemove:p=>L(f.index),onMouseleave:p=>_(f.index)},null,42,Ee))),128))])]))),128))])]))}},ee=ve(Le,[["__scopeId","data-v-4ac78f70"]]),We={class:"flex-c"},Ae={class:"my-2"},Fe={__name:"web-time-picker",setup(S){const U=O(["09:00","18:00"]),v=O([]),C=O([]),F=O([]),Y=O([]),$=O(["09:00","23:59"]),l=O(["09:30","18:30"]),m=O(["09:40","16:00"]),x=O(["09:45","13:30"]),W=O(["09:50","12:30"]),V={10:"10分",15:"15分",20:"20分",30:"30分",60:"60分"},E=_e({minHour:"0",maxHour:"23",step:30,activeColor:"#FFCD5E",readonly:!0,disabledBefore:!0}),j=new Map([[10,W],[15,x],[20,m],[30,l],[60,$]]),k=L=>L.length?L.join(" ~ "):"-";function J(L){return j.get(+L).value}const te=(L,_)=>{j.get(+_).value=L};return(L,_)=>{const g=ke,h=xe,o=Oe,s=be("RouterLink"),f=we,p=De,b=Se;return P(),Me(b,{shadow:"never"},{header:I(()=>[w(f,{type:"flex",align:"middle",justify:"space-between"},{default:I(()=>[B("div",We,[_[7]||(_[7]=R(" 块状时间段选择组件(自主封装)  ")),w(h,{trigger:"click"},{content:I(()=>_[5]||(_[5]=[B("p",null,[R(" 操作交互逻辑："),B("br"),R(" 1.当选择了某一节，点击该节之前则是选择开始时间，点击该节之后则是选择结束时间；"),B("br"),R(" 2.开始和结束时间均选择完毕，选择高亮区域之前则重置，选择高亮区域之后则是重新选择结束时间；"),B("br"),R(" 3.开始和结束时间均选择完毕，往前选择则重置，往后选择则是选择结束时间；"),B("br"),R(" 3.开始和结束时间均选择完毕，点击高亮区域中间（不含第一节或最后一节），则是重新选择结束时间；"),B("br"),R(" 4.开始和结束时间均选择完毕，点击高亮区域第一节或最后一节均是取消选择该时间。"),B("br")],-1)])),default:I(()=>[w(g,{class:"cursor-pointer"},{default:I(()=>[w(ie(He))]),_:1})]),_:1}),w(s,{to:"/mobie"},{default:I(()=>[w(o,{class:"ml-2"},{default:I(()=>_[6]||(_[6]=[R("移动端(mobie)版本")])),_:1})]),_:1})])]),_:1})]),default:I(()=>[B("div",null,[w(p,{"content-position":"left"},{default:I(()=>[R(" 基础使用: 已选时间 "+q(k(v.value)),1)]),_:1}),w(ee,{modelValue:v.value,"onUpdate:modelValue":_[0]||(_[0]=i=>v.value=i)},null,8,["modelValue"]),w(p,{"content-position":"left"},{default:I(()=>[R(" 默认选中时间: 已选时间 "+q(k(U.value)),1)]),_:1}),w(ee,{modelValue:U.value,"onUpdate:modelValue":_[1]||(_[1]=i=>U.value=i)},null,8,["modelValue"]),w(p,{"content-position":"left"},{default:I(()=>[R(" 自定义选中高亮颜色（activeColor） 已选时间 "+q(k(C.value)),1)]),_:1}),w(ee,de({modelValue:C.value,"onUpdate:modelValue":_[2]||(_[2]=i=>C.value=i)},ie(ce)(E,["activeColor"])),null,16,["modelValue"]),w(p,{"content-position":"left"},{default:I(()=>[R(" 指定可选范围（minHour：9，maxHour: 18） 已选时间 "+q(k(F.value)),1)]),_:1}),w(ee,{modelValue:F.value,"onUpdate:modelValue":_[3]||(_[3]=i=>F.value=i),"min-hour":9,"max-hour":18},null,8,["modelValue"]),w(p,{"content-position":"left"},{default:I(()=>[R(" 只读（readonly）和禁用过去时间（disabledBefore） 已选时间 "+q(k(Y.value)),1)]),_:1}),w(ee,de({modelValue:Y.value,"onUpdate:modelValue":_[4]||(_[4]=i=>Y.value=i)},ie(ce)(E,["readonly","disabledBefore"])),null,16,["modelValue"]),w(p,{"content-position":"left"},{default:I(()=>_[8]||(_[8]=[R("自定义时间间隔（step: 60|30|20|15|10）")])),_:1}),(P(!0),K(se,null,oe(Object.keys(V).reverse(),i=>(P(),K(se,{key:i},[B("p",Ae,"每隔 "+q(i)+" 分钟 已选时间："+q(k(J(i))),1),w(ee,{"model-value":J(i),step:i,onChange:t=>te(t,i)},null,8,["model-value","step","onChange"])],64))),128))])]),_:1})}}};export{Fe as default};
